import matplotlib.pyplot as plt
import numpy as np


#AMBIENTE (1)
TEMP_V = [2.91, 2.92, 2.91, 2.91, 2.92, 2.92, 2.92, 2.92, 2.92, 2.92, 2.92]
SIPM_I = [5E-6, 6.08E-6, 8.2E-6, 14.7E-6, 34.5E-6, 92E-6, 151.8E-6, 0.25E-3, 0.66E-3, 1.03E-3, 1.57E-3]
#SIPM_I_ERR = 
APD_V = [30.227, 30.227, 30.227, 30.228, 30.227, 30.227, 30.226, 30.228, 30.2258, 30.224, 30.228]
MON_V = [14.4E-3, 16.4E-3, 20.9E-3, 35.2E-3, 75E-3, 192E-3, 0.31, 0.5, 1.323, 2.06, 3.14]
LED_I = [0, 203E-6, 206E-6, 209E-6, 212E-6, 215E-6, 216.5E-6, 218E-6, 221E-6, 222.5E-6, 224E-6]
MON_I = []       

#CALIENTE (2)
TEMP_V = [3.02, 3.02, 3.02, 3.02, 3.02, 3.02, 3.02, 3.02, 3.02, 3.04, 3.04]
SIPM_I = [4.91E-6, 5.9E-6, 7.9E-6, 14.3E-6, 33.6E-6, 90E-6, 149.6E-6, 0.246E-3, 0.647E-3, 1.016E-3, 1.552E-3]
APD_V = [30.224, 30.223, 30.224, 30.223, 30.222, 30.222, 30.223, 30.22, 30.22, 30.216, 30.219]
MON_V = [14.3E-3, 16.4E-3, 20.7E-3, 34.5E-3, 73.4E-3, 187.8E-3, 0.303, 0.497, 1.3, 2.035, 3.1]
LED_I = [0, 203E-6, 206E-6, 209E-6, 212E-6, 215E-6, 216.5E-6, 218E-6, 221E-6, 222.5E-6, 224E-6]
MON_I = []

#FRIO (1)
TEMP_V = [2.9, 2.9, 2.9, 2.9, 2.9, 2.9, 2.9, 2.9, 2.9, 2.9, 2.9]
SIPM_I = [4.3E-6, 5.2E-6, 7.14E-6, 13E-6, 31.14E-6, 84.5E-6, 141.2E-6, 0.233E-3, 0.623E-3, 0.98E-3, 1.51E-3]
APD_V = [30.22, 30.22, 30.228, 30.229, 30.228, 30.227, 30.227, 30.229, 30.229, 30.226, 30.23]
MON_V = [13E-3, 14.8E-3, 18.7E-3, 31.42E-3, 68.7E-3, 176.03E-3, 0.286, 0.471, 1.244, 1.965, 3]
LED_I = [0, 203E-6, 206E-6, 209E-6, 212E-6, 215E-6, 216.5E-6, 218E-6, 221E-6, 222.5E-6, 224E-6]
MON_I = []

for i in range(len(MON_V)):
    MON_I.append(MON_V[i]/10000.0)
    

#line to plot things in mA
for i in range(len(MON_I)):
    SIPM_I[i] *= 1000
    MON_I[i] *= 1000 


plt.plot(SIPM_I, MON_I, 'o')
plt.grid(True)
plt.xlabel("I SiPM [mA]")
plt.ylabel("I MON [mA]")
plt.tight_layout(True)

fit = np.polyfit(SIPM_I, MON_I, 1)
plt.plot(SIPM_I, np.polyval(fit, SIPM_I))

print(fit)
